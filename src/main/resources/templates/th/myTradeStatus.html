<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">

    <title>Trade Status</title>
    <link rel="stylesheet" th:href="@{/css/customer.css}">
</head>
<body>
<header>
    <th:blcok th:insert="~{th/customerHeader::header(user)}"></th:blcok>
</header>

<br><br><br><br><br>
<div th:text="'사용자 이름: '+${userName}"></div>
<br>
<th:block th:each="pageDTO : ${tradeList}">
    <th:block th:each="tradeMap : ${pageDTO.objectList}">
        <div th:switch="${tradeMap.tradeInfo.trade_status}">
            <p th:case="0" th:text="'교환신청이 완료되었습니다.'"></p>
            <p th:case="1" th:text="'배차가 완료되었습니다.'"></p>
            <p th:case="2" th:text="'배송중 입니다.'"></p>
            <p th:case="3" th:text="'배송이 완료되었습니다.'">.</p>
            <p th:case="*" th:text="'오류가 발생했습니다. 관리자에게 문의해주세요.'"></p>
        </div>
        <div th:text="'거래 정보: ' + ${tradeMap.tradeInfo.fir_user_email} + ' <-> ' + ${tradeMap.tradeInfo.sec_user_email}"></div>
        <br>
        <div>
            <div>
                <div>첫 번째 책 정보</div>
                <div>
                    <div><img th:src="${tradeMap.firstBook.image}" alt=""></div>
                    <div>
                        <div th:text="'도서: ' + ${tradeMap.firstBook.name}"/>
                        <div th:text="': ' + ${tradeMap.firstBook.author}"/>
                        <div th:text="'출판사: ' + ${tradeMap.firstBook.publisher}"/>
                    </div>
                </div>
            </div>
            <div>
                <div>두 번째 책 정보</div>
                <div>
                    <div>
                        <img th:src="${tradeMap.secondBook.image}" alt=""></div>
                    <div>
                        <div th:text="'도서: ' + ${tradeMap.secondBook.name}"/>
                        <div th:text="'저자: ' + ${tradeMap.secondBook.author}"/>
                        <div th:text="'출판사: ' + ${tradeMap.secondBook.publisher}"/>
                    </div>
                </div>
            </div>
        </div>
    </th:block>
</th:block>
<div id="paging_area">
    <a th:href="@{'?pageNum=1'}" class="page-link">|◀</a>
    <th:block th:if="${currentPageNum > 3}">
        <a th:href="@{'?pageNum=' + ${currentPageNum - 3}}" class="page-link">이전</a>
    </th:block>
    <th:block th:each="pageNum : ${#numbers.sequence(currentPageNum - 2, currentPageNum + 2)}">
        <th:block th:if="${pageNum >= 1 && pageNum <= listMaxSize}">
            <a th:href="@{'?pageNum=' + ${pageNum}}" th:text="${pageNum}"
               th:class="${pageNum == currentPageNum ? 'current-page' : 'page-link'}"></a>
        </th:block>
    </th:block>
    <th:block th:if="${currentPageNum + 2 < listMaxSize}">
        <a th:href="@{'?pageNum=' + ${currentPageNum + 3}}" class="page-link">다음</a>
    </th:block>
    <a th:href="@{'?pageNum=' + ${listMaxSize}}" class="page-link">▶|</a>
</div>

<footer>
    <th:blcok th:insert="~{th/footer}"></th:blcok>
</footer>
</body>
</html>